cd container
docker build -t rgcn_server -f Dockerfile_rgcn .
cd ..

docker run -d -p 9001:8006 --cpus="1.0" --memory="2g" --name rgcn_cpu1 rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/CPU1+Mem2.csv && docker stop rgcn_cpu1 && docker rm rgcn_cpu1

docker run -d -p 9001:8006 --cpus="2.0" --memory="4g" --name rgcn_cpu2 rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/CPU2+Mem4.csv && docker stop rgcn_cpu2 && docker rm rgcn_cpu2

docker run -d -p 9001:8006 --cpus="3.0" --memory="6g" --name rgcn_cpu3 rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/CPU3+Mem6.csv && docker stop rgcn_cpu3 && docker rm rgcn_cpu3

docker run -d -p 9001:8006 --cpus="4.0" --memory="8g" --name rgcn_cpu4 rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/CPU4+Mem8.csv && docker stop rgcn_cpu4 && docker rm rgcn_cpu4

docker run -d -p 9001:8006 --cpus="6.0" --memory="12g" --name rgcn_cpu6 rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/CPU6+Mem12.csv && docker stop rgcn_cpu6 && docker rm rgcn_cpu6

docker run --gpus all -d -p 9001:8006 --cpus="6.0" --memory="12g" --name rgcn_gpu rgcn_server && sleep 20 && python scripts/client_sweep_rgcn.py --url http://127.0.0.1:9001/infer --node_scales 100 500 1000 2000 5000 8000 10000 --out data/GPU+CPU6+Mem12.csv && docker stop rgcn_gpu && docker rm rgcn_gpu

python scripts/generate_result.py